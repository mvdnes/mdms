#!/bin/env python

import sys
import config
import document
import database.sqlite
import uuid as uuidlib

def main():
    configuration = config.parse('config.toml')
    db = database.get_instance(configuration)
    if len(sys.argv) > 1:
        uuid = uuidlib.UUID(sys.argv[1])
        doc = db.load(uuid)
        print(doc.creation_date)
        if len(sys.argv) > 2:
            doc.name = sys.argv[2]
            db.save(doc)
        print(doc.name)
        print(doc.tags)
    else:
        doc = document.Document()
        doc.add_tag("dummy")
        db.save(doc)
        print(doc.uuid)
        print(doc.creation_date)

if __name__ == '__main__':
    main()
