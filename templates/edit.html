{% extends "base.html" %}

{% block head %}
<a href="{{ url_for('document', uuid=doc.uuid) }}">View</a>
{% endblock %}

{% block content %}
<h2>General</h2>
<form method="post" action="{{ url_for('save', uuid=doc.uuid) }}">
    <div class="form-group">
        <label>Name:
            <input type="text" name="name" value="{{ doc.name }}" class="form-control">
        </label>
    </div>
    <div class="form-group">
        <label>Date:
            <input type="date" name="date" value="{{ doc.document_date.date() }}" class="form-control">
        </label>
    </div>
    <div class="form-group">
        <label for="extra">Extra:</label>
        <textarea id="extra" name="extra" rows=10 class="form-control">{{ docextra if doc.extra != None }}</textarea>
    </div>
    <input type="submit" value="Save" class="btn btn-default">
</form>

<h2>Tags</h2>
<ul>
    {% for tag in doc.tags|sort %}
    <li>
        {{ tag }}
        <form method="post" action="{{ url_for('save', uuid=doc.uuid) }}">
            <input type="hidden" name="tag" value="{{ tag }}">
            <input type="submit" name="deltag" value="Delete">
        </form>
    </li>
    {% endfor %}
</ul>
<form method="post" action="{{ url_for('save', uuid=doc.uuid) }}">
    <input type="text" name="tag">
    <input type="submit" name="addtag" value="Add tag">
</form>

<h2>Files</h2>
<ul>
    {% for file in files %}
    <li>
        <a href="{{ url_for('download', uuid=doc.uuid, file=file) }}">{{ file }}</a>
        <form method="post" action="{{ url_for('save', uuid=doc.uuid) }}">
            <input type="hidden" name="file" value="{{ file }}">
            <input type="submit" name="delfile" value="Delete">
        </form>
    </li>
    {% endfor %}
</ul>

<form method="post" action="{{ url_for('upload', uuid=doc.uuid) }}" enctype="multipart/form-data">
    <input type="file" name="document">
    <input type="submit">
</form>

<a href="{{ url_for('delete', uuid=doc.uuid) }}">Delete</a>
{% endblock %}
